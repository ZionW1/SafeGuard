<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <title>캠페인 목록 요약</title>
        <link rel="stylesheet" th:href="@{/css/style.css}">
        <!-- <link href="https://cdn.jsdelivr.net/npm/pretendard@1.3.6/dist/web/variable/pretendardvariable.css" rel="stylesheet" /> -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <th:block th:replace="~{fragments/csrfFragments :: metaCsrf}"></th:block>
    </head>
    <body>
        <div class="admin-container">
            <!-- 사이드바 -->
            <div th:replace="~{fragments/sideBar :: sidebarFragment}"></div>
            
            <!-- 본문 영역 -->
            <div class="main-content">
                
                <h1><a th:href="@{/admin/campaign01}">캠페인 목록 요약</a></h1>
                <form class="optionForm" action="@{/admin/campaign01}" method="get" id="form">
                    <th:block th:replace="fragments/csrfFragments :: inputCsrf"></th:block>

                    <select name="code">
                        <option value="0" th:selected="${option.code==0}">전체</option>
                        <option value="1" th:selected="${option.code==1}">제목</option>
                        <option value="2" th:selected="${option.code==2}">주소</option>
                        <option value="3" th:selected="${option.code==3}">리더자</option>
                    </select>
                    <select name="orderCode" id="order-code">
                        <option value="0" th:selected="${option.orderCode == 0}">최신순</option>
                        <option value="1" th:selected="${option.orderCode == 1}">제목순</option>
                    </select>
                    <input type="text" name="keyword" placeholder="검색어를 입력해 주세요." th:value="${param.keyword}">
                    <input class="optionSubmit" type="submit" value="검색">
                    
                </form>
                <table border="1">
                    <thead>
                        <th>ID</th>
                        <th>지역</th>
                        <th class="title">캠페인명</th>
                        <th>인솔자</th>
                        <th>생성일</th>
                        <th>신청자수</th>
                        <th>모집인원</th>
                        <th>상세보기</th>
                    </thead>
                    <tbody>
                        <th:block th:if="${campaignsList.isEmpty()}">
                            <tr>
                                <td colspan="5" align="center">조회된 데이터가 없습니다.</td>
                            </tr>
                        </th:block>
                    </div>
                        <th:block th:each="campaign : ${campaignsList}">
                            <!-- <a th:href="|/admin/campaign/select?id=${campaign.id}|"> -->
                            <tr th:onclick="|location.href='@{/admin/campaign02(id=${campaign.campaignId})}'|">
                                <td><span th:text="${campaign.campaignId}"></span></td>
                                <td><span th:text="${campaign.placeAddr}"></span></td>
                                <td><span th:text="${campaign.campaignTitle}"></span></td>
                                <!-- <td><span th:text="${campaign.status}"></span></td> -->
                                <td><span th:text="${campaign.userNm}"></span></td>
                                <td><span th:text="${campaign.createdAt}"></span></td>
                                <td><span th:text="${campaign.applicantsNum}"></span></td>
                                <td><span th:text="${campaign.recruitmentNum}"></span></td>
                                <td>
                                    <!-- <a th:href="@{'campaign_detail.html'(id=${campaigns.id})}">상세보기</a> -->
                                    <a th:href="|/campaign/select?id=${campaign.id}|">상세보기</a>
                                </td>
                            </tr>
                        </th:block>
                    </tbody>
                </table>
                <div class="parent">
                    <div class="child">
                    <!-- [처음] -->
                    <!-- <a th:href="|/board/list?page=${page.first}&keyword=${option.keyword}&code=${option.code}&rows=${page.rows}&orderCode=${option.orderCode}|">[처음]</a> -->
                    <!-- <a th:href="@{/board/list(page=${page.first}, keyword=${ option.keyword}, code=${option.code}, rows=${page.rows}, orderCode=${option.orderCode})}">[처음]</a> -->
                    <a th:href="@{${pageUrl} + '&page=' + ${page.first}}">[처음]</a>
                    <!-- [이전] -->
                    <th:block th:if="${page.page != page.first }">
                        <!-- <a th:href="|/board/list?page=${page.prev}&keyword=${option.keyword}&code=${option.code}&rows=${page.rows}&orderCode=${option.orderCode}|">[이전]</a> -->
                        <!-- <a th:href="@{/board/list(page=${page.prev}, keyword=${option.keyword}, code=${option.code}, rows=${page.rows}, orderCode=${option.orderCode})}">[이전]</a> -->
                        <a th:href="@{${pageUrl} + '&page=' + ${page.prev}}">[이전]</a>
                    </th:block>
        
                    <!-- [페이지 번호] -->
                    <!-- 
                        #numbers.sequence( 시작, 끝 )
                        : 시작번호부터 끝 번호까지 리스트를 생성
                    -->
                    
                    <th:block th:each="no : ${#numbers.sequence(page.start, page.end)}">
                        <!-- 현재 페이지 -->
                        <th:block th:if="${page.page == no}">
                            <b><span th:text="${no}"></span></b>
                        </th:block>
                        <th:block th:if="${page.page != no}">
                            <!-- 기본 URL -->
                            <!-- <a th:href="|/board/list?page=${no}&keyword=${option.keyword}&code=${option.code}&rows=${page.rows}&orderCode=${option.orderCode}|" th:text="${no}"></a> -->
                            <!-- 타임리프 URL 표현식 -->
                            <!-- <a th:href="@{/board/list(page=${no}, keyword=${option.keyword}, code=${option.code}, rows=${page.rows}, orderCode=${option.orderCode})}" th:text="${no}">/a> -->
                            <a th:href="@{${pageUrl} + '&page='+${no}}" th:text="${no}"></a>
                        </th:block>
                    </th:block>
                    <!-- [다음] -->
                    <th:block th:if="${page.page != page.last }">
                        <!-- <a th:href="|/board/list?page=${page.next}&keyword=${option.keyword}&code=${option.code}&rows=${page.rows}&orderCode=${option.orderCode}|">[다음]</a> -->
                        <!-- <a th:href="@{/board/list(page=${page.next}, keyword=${option.keyword}, code=${option.code}, rows=${page.rows}, orderCode=${option.orderCode})}">[다음]</a> -->
                        <a th:href="@{${pageUrl} + '&page=' + ${page.next}}">[다음]</a>
                    </th:block>
                    <!-- [마지막] -->
                    <!-- <a th:href="|/board/list?page=${page.last}&keyword=${option.keyword}&code=${option.code}&rows=${page.rows}&orderCode=${option.orderCode}|">[마지막]</a> -->
                    <!-- <a th:href="@{/board/list(page=${page.last}, keyword=${option.keyword}, code=${option.code}, rows=${page.rows}, orderCode=${option.orderCode})}">[마지막]</a> -->
                    <a th:href="@{${pageUrl} + '&page=' + ${page.last}}">[마지막]</a>
                </div>
                
                </div>
                <a href="@{/admin/campaign03}" class="insert">등록</a>

            </div>
        </div>
<!-- 
        <script>
            fetch("../data/campaigns.json")
                .then((res) => res.json())
                .then((data) => {
                    const tbody = document.querySelector("#campaignTable tbody");
                    data.forEach((c) => {
                        const row = document.createElement("tr");
                        row.setAttribute("data-id", c.id);
                        row.innerHTML = `
                            <td>${c.id}</td>
                            <td>${c.region || "미입력"}</td>
                            <td>${c.title}</td>
                            <td>${c.status || "진행중"}</td>
                            <td>${c.date}</td>
                            <td>${c.applicants}</td>
                            <td>${c.limit}</td>
                            <td></td>
                        `;
                        row.addEventListener("click", () => {
                            window.location.href = `campaign_detail.html?id=${c.id}`;
                        });
                        tbody.appendChild(row);
                    });
                });
        </script>
        <script th:inline="javascript">
            document.addEventListener("DOMContentLoaded", function(){
            
            console.log("a : " + companiesList);
            console.log("b : " + userGuideList);
            });
        </script> -->
        <div th:replace="fragments/footer :: mainFooter"></div>
        <!-- <script src="/js/common.js"></script> -->

    </body>
</html>
